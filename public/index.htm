<!DOCTYPE html>
<html>
    <head>
        <title>Lights</title>
        <meta charset="utf-8">
        <meta name="description" content="Seven Tears band page">
        <meta name="keywords" content="Seven,Tears,Band,Rock,Seventies">
        <script src="./js/libs/jquery-1.9.1.min.js"></script>
        <link type="text/css" rel="stylesheet" href="css/groundwork.css">
        <!--[if IE]><link type="text/css" rel="stylesheet" href="css/groundwork-ie.css"><![endif]-->
        <!--[if lt IE 9]><script type="text/javascript" src="js/libs/html5shiv.min.js"></script><![endif]-->
        <!--[if IE 7]><link type="text/css" rel="stylesheet" href="css/font-awesome-ie7.min.css"><![endif]-->
        <script>
            function add_actors_groups(actorsGroups, container)
            {
                    $(container).empty(str);
                    for(var k in actorsGroups)
                    {
                        var actors = actorsGroups[k];
                        var str = "";
                        str += '<div class="tiles"> <input type="hidden" value="" id="action-tiles-'+k+'" class="value">';
                        for(var i in actors)
                        {
                            for(var j in actors[i])
                            {
                                var button = actors[i][j];
                                str += '<div class="tile ' + (button['class'] == undefined?'':button['class'])+ '" data-value="'
                                    + i + '_' + (button['specific'] == undefined? '' : (button['specific'] + '_')) + button['name'] + '">';
                                str += '<i class="icon-4x icon-' + button['icon'] + '"></i>'
                                if(!actors[i][j].notext) str += i + ' ' + (button['display-name'] == null ?button['name']:button['display-name']);
                                str += '</div> ';
                            }
                        }
                        str += "</div>"
                        $(container).append(str);
                    $('input#action-tiles-' + k).on('change', function() {
                        var url = $(this).val().replace(/___/g, "---").replace(/__/g, ".").replace(/_/g, "/").replace(/---/g, "_");
                        $.get(url , function(data)
                        {
                        });
                    });
                    }
                }
            $(document).ready(function(){
                var actorsGroups = [ {
                    "salon": [
                    {"icon": "circle", "name": "on"},
                    {"icon": "circle-blank", "name": "off"},
                    ],
                    "store": [
                    {"icon": "arrow-up", "name": "up"},
                    {"icon": "arrow-down", "name": "down"},
                    ],
                    "video": [
                    {"icon": "off", "name": "on-off"},
                    ],
                },
                {
                    "video": [
                    {"icon": "fast-backward", "specific": "control", "name": "fast-backward", "notext": true},
                    {"icon": "backward", "specific": "control", "name": "backward", "notext": true},
                    {"icon": "play", "specific": "control", "name": "play", "notext": true},
                    {"icon": "stop", "specific": "control", "name": "stop", "notext": true},
                    {"icon": "pause", "specific": "control", "name": "pause", "notext": true},
                    {"icon": "forward", "specific": "control", "name": "forward", "notext": true},
                    {"icon": "fast-forward", "specific": "control", "name": "fast-forward", "notext": true},
                    ],
                },
                ]
                add_actors_groups(actorsGroups, "#content");
                function load_videos() {
                $.getJSON('video/list', function(data) {
                actorsGroups = [ { "media": [ ] } ]
                var videos = actorsGroups[0]['media']
                for(k in data)
                {
                videos.push(
                {"icon": "film", "display-name": data[k]['name'], "class": "one half",
                "name": data[k]['name'].replace(/_/g, "___").replace(/\./g, "__"), "specific": "play", "small": true});
                videos.push(
                {"icon": "remove", "display-name": data[k]['size'], "class": "one half",
                "name": data[k]['name'], "specific": "remove", "small": true}
                );
                }
                add_actors_groups(actorsGroups, "#videos");
                });
                }
                load_videos();
                setInterval(load_videos, 1000 * 20);
                function disk_used()
                {
                    $.get('disk/used', function(data) {
                    $("#disk_used").empty();
                    $("#disk_used").append(data);
                    });
                }
                disk_used();
                setInterval(disk_used, 1000 * 20);
                 });
        </script>
    </head>
    <body>
        <div class="one sixth">
        </div>
        <div class="four sixth">
            <div id="content">
            </div>
            <div id="disk_used">
            </div>
            <div id="videos">
            </div>
        </div>
        <div class="one sixth">
        </div>
        <script type="text/javascript" src="./js/plugins/jquery.cycle2.js"></script>
        <script type="text/javascript" src="./js/groundwork.all.js"></script>
    </body>
</html>
